{"ast":null,"code":"import _objectSpread from \"/Users/Dev/WebstormProjects/event-calendar/yoga-class-agenda-component/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"/Users/Dev/WebstormProjects/event-calendar/yoga-class-agenda-component/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _jsxFileName = \"/Users/Dev/WebstormProjects/event-calendar/yoga-class-agenda-component/src/Agenda/Agenda.js\";\nimport React from \"react\";\nimport Layout from \"./UI/Layout/Layout\";\nimport WeekMode from \"./UI/ViewMode/WeekMode/WeekMode\";\nimport CalendarMode from \"./UI/ViewMode/CalendarMode/CalendarMode\";\nimport DayMode from \"./UI/ViewMode/DayMode/DayMode\";\nexport default class Agenda extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      appViewMode: this.props.defaultView,\n      currentMonth: [],\n      currentWeek: [],\n      currWeekIndex: \"initial\",\n      currentDay: '',\n      currentDayIndex: \"initial\",\n      prevMonthLastWeekIndex: [],\n      monthGetter: new Date().getMonth(),\n      yearGetter: new Date().getFullYear(),\n      arrayOfDailyHoursTable: [],\n      backdropIsActive: false,\n      dialogBoxData: {\n        displayDialogBox: false,\n        topPositionFromClassCard: \"\",\n        heigthPositionFromClassCard: \"\"\n      },\n      layoutWidthDimensions: {\n        width: \"\",\n        dayCardContainerWidth: \"\"\n      }\n    };\n\n    this.arrayOfTableRows = (startingHour, endingHour) => {\n      let arrayOfDailyHoursTable = [startingHour];\n\n      for (let i = startingHour; i < endingHour; i++) {\n        arrayOfDailyHoursTable.push(Math.max.apply(null, arrayOfDailyHoursTable) + 1);\n      }\n\n      this.setState({\n        arrayOfDailyHoursTable\n      });\n    };\n\n    this.dayModeLogicHandler = () => {\n      const currentWeek = this.state.currentWeek.filter(day => new Date(day).getMonth() === this.state.monthGetter);\n      const currentDay = this.state.currentWeek[this.state.currentDayIndex];\n      this.setState({\n        currentDay\n      });\n    };\n\n    this.dayAgendaNavigationHandler = modal => {\n      if (modal === 'increment') {\n        if (this.state.currentDayIndex < this.state.currentWeek.filter(day => new Date(day).getMonth() === this.state.monthGetter).length - 1) {}\n      }\n\n      if (modal === 'decrement') {}\n    };\n\n    this.weekAgendaLogicHandler = () => {\n      const currentWeek = this.state.currentMonth[this.state.currWeekIndex];\n      this.setState({\n        currentWeek\n      });\n    };\n\n    this.weekAgendaNavigationHandler = modal => {\n      //init the current week index\n      if (modal === \"increment\") {\n        //if the number of weeks incremented does not exceed the amount of weeks in the month\n        if (this.state.currWeekIndex < this.state.currentMonth.length - 1) {\n          this.setState((_ref) => {\n            let currWeekIndex = _ref.currWeekIndex,\n                restTop = _objectWithoutProperties(_ref, [\"currWeekIndex\"]);\n\n            return _objectSpread({\n              currWeekIndex: currWeekIndex + 1\n            }, restTop);\n          }, () => {\n            this.weekAgendaLogicHandler();\n          });\n        }\n\n        if (this.state.currWeekIndex === this.state.currentMonth.length - 1) {\n          this.setState((_ref2) => {\n            let currWeekIndex = _ref2.currWeekIndex,\n                restTop = _objectWithoutProperties(_ref2, [\"currWeekIndex\"]);\n\n            return _objectSpread({\n              currWeekIndex: 0\n            }, restTop);\n          }, () => {\n            this.calendarNavigationHandler(\"increment\");\n          });\n        }\n      }\n\n      if (modal === \"decrement\" && !this.state.currentWeek.includes(new Date().setHours(0, 0, 0, 0))) {\n        if (this.state.currWeekIndex > 0) {\n          this.setState((_ref3) => {\n            let currWeekIndex = _ref3.currWeekIndex,\n                restTop = _objectWithoutProperties(_ref3, [\"currWeekIndex\"]);\n\n            return _objectSpread({\n              currWeekIndex: currWeekIndex - 1\n            }, restTop);\n          }, () => {\n            this.weekAgendaLogicHandler();\n          });\n        }\n\n        if (this.state.currWeekIndex === 0) {\n          this.calendarNavigationHandler(\"decrement\");\n        }\n      }\n    };\n\n    this.calendarLogicHandler = () => {\n      const oneDay = 86400000;\n      const lastDayOfTheMonth = new Date(this.state.yearGetter, this.state.monthGetter + 1, 0).getDate();\n      let currentMonth = [new Date(this.state.yearGetter, this.state.monthGetter, 1).valueOf()]; //starts on month day 1\n\n      for (let i = 1; i < lastDayOfTheMonth; i++) {\n        //push the entire month\n        currentMonth.push(Math.max.apply(null, currentMonth) + oneDay);\n      } //localize the first date of the month dates array and check what day of the week it is\n      //spread the days of the week, which are the remaining days of prev month to fill calendar first week\n\n\n      for (let i = new Date(Math.min(...currentMonth)).getDay(); i > 0; i--) {\n        currentMonth.unshift(Math.min.apply(null, currentMonth) - oneDay);\n      } //spread the days of the week, which are the remaining days of prev month to fill calendar last week\n\n\n      for (let i = new Date(Math.max(...currentMonth)).getDay(); i < 6; i++) {\n        currentMonth.push(Math.max.apply(null, currentMonth) + oneDay);\n      }\n\n      let monthInWeeks = [];\n\n      for (let i = 0; i < currentMonth.length; i += 7) {\n        let chunk = currentMonth.slice(i, i + 7);\n        monthInWeeks.push(chunk);\n      }\n\n      currentMonth = monthInWeeks;\n      this.setState({\n        currentMonth\n      });\n    };\n\n    this.calendarNavigationHandler = modal => {\n      if (modal === \"increment\") {\n        //saving the max index of curr month before incrementing\n        this.setState((_ref4) => {\n          let prevMonthLastWeekIndex = _ref4.prevMonthLastWeekIndex,\n              restTop = _objectWithoutProperties(_ref4, [\"prevMonthLastWeekIndex\"]);\n\n          return _objectSpread({\n            prevMonthLastWeekIndex: [...prevMonthLastWeekIndex, this.state.currentMonth.length - 1]\n          }, restTop);\n        }, () => this.setState({\n          currWeekIndex: 0\n        }));\n\n        if (this.state.monthGetter < 11) {\n          //just add months, before changing the year\n          this.setState((_ref5) => {\n            let monthGetter = _ref5.monthGetter,\n                restTop = _objectWithoutProperties(_ref5, [\"monthGetter\"]);\n\n            return _objectSpread({\n              monthGetter: monthGetter + 1\n            }, restTop);\n          }, () => this.calendarLogicHandler());\n        }\n\n        if (this.state.monthGetter >= 11) {\n          //if the month is december it resets the month and increments the year\n          this.setState((_ref6) => {\n            let yearGetter = _ref6.yearGetter,\n                monthGetter = _ref6.monthGetter,\n                restTop = _objectWithoutProperties(_ref6, [\"yearGetter\", \"monthGetter\"]);\n\n            return _objectSpread({\n              yearGetter: yearGetter + 1,\n              monthGetter: 0\n            }, restTop);\n          }, () => this.calendarLogicHandler());\n        }\n      }\n\n      if (modal === \"decrement\") {\n        if (this.state.appViewMode === \"WeekMode\") {\n          //saving the max index of curr month before incrementing\n          this.setState({\n            currWeekIndex: this.state.prevMonthLastWeekIndex[this.state.prevMonthLastWeekIndex.length - 1]\n          }, () => {\n            this.setState((_ref7) => {\n              let prevMonthLastWeekIndex = _ref7.prevMonthLastWeekIndex,\n                  restTop = _objectWithoutProperties(_ref7, [\"prevMonthLastWeekIndex\"]);\n\n              return _objectSpread({\n                prevMonthLastWeekIndex: [...prevMonthLastWeekIndex.slice(0, -1)]\n              }, restTop);\n            });\n          });\n        }\n\n        if (this.state.appViewMode === \"CalendarMode\") {\n          //saving the max index of curr month before incrementing\n          this.setState({\n            currWeekIndex: 0\n          }, () => {\n            this.setState((_ref8) => {\n              let prevMonthLastWeekIndex = _ref8.prevMonthLastWeekIndex,\n                  restTop = _objectWithoutProperties(_ref8, [\"prevMonthLastWeekIndex\"]);\n\n              return _objectSpread({\n                prevMonthLastWeekIndex: [...prevMonthLastWeekIndex.slice(0, -1)]\n              }, restTop);\n            });\n          });\n        } //just subtract months, before changing the year, if the current day is not present in the current calendar month.\n\n\n        if (this.state.monthGetter > 0 && !this.state.currentMonth.flat().includes(new Date().setHours(0, 0, 0, 0).valueOf())) {\n          this.setState((_ref9) => {\n            let monthGetter = _ref9.monthGetter,\n                restTop = _objectWithoutProperties(_ref9, [\"monthGetter\"]);\n\n            return _objectSpread({\n              monthGetter: monthGetter - 1\n            }, restTop);\n          }, () => this.calendarLogicHandler());\n        } //if the month is december it resets the month and increments the year\n\n\n        if (this.state.monthGetter <= 0) {\n          this.setState((_ref10) => {\n            let yearGetter = _ref10.yearGetter,\n                monthGetter = _ref10.monthGetter,\n                restTop = _objectWithoutProperties(_ref10, [\"yearGetter\", \"monthGetter\"]);\n\n            return _objectSpread({\n              yearGetter: yearGetter - 1,\n              monthGetter: 11\n            }, restTop);\n          }, () => this.calendarLogicHandler());\n        }\n      }\n    };\n\n    this.appNavigationHandler = modal => {\n      if (this.state.appViewMode === \"WeekMode\") {\n        this.weekAgendaNavigationHandler(modal);\n      }\n\n      if (this.state.appViewMode === \"CalendarMode\") {\n        this.calendarNavigationHandler(modal);\n      }\n    };\n\n    this.newDatesToVerboseHandler = (date, verboseType) => {\n      let renderWeekDay = date.toString().length > 2 ? date.getDay() : date;\n\n      switch (renderWeekDay) {\n        case 0:\n          renderWeekDay = \"Sunday\";\n          break;\n\n        case 1:\n          renderWeekDay = \"Monday\";\n          break;\n\n        case 2:\n          renderWeekDay = \"Tuesday\";\n          break;\n\n        case 3:\n          renderWeekDay = \"Wednesday\";\n          break;\n\n        case 4:\n          renderWeekDay = \"Thursday\";\n          break;\n\n        case 5:\n          renderWeekDay = \"Friday\";\n          break;\n\n        case 6:\n          renderWeekDay = \"Saturday\";\n          break;\n\n        default:\n          renderWeekDay = null;\n      }\n\n      let renderMonth = date.toString().length > 2 ? date.getMonth() : date;\n\n      switch (renderMonth) {\n        case 0:\n          renderMonth = \"January\";\n          break;\n\n        case 1:\n          renderMonth = \"February\";\n          break;\n\n        case 2:\n          renderMonth = \"March\";\n          break;\n\n        case 3:\n          renderMonth = \"April\";\n          break;\n\n        case 4:\n          renderMonth = \"May\";\n          break;\n\n        case 5:\n          renderMonth = \"June\";\n          break;\n\n        case 6:\n          renderMonth = \"July\";\n          break;\n\n        case 7:\n          renderMonth = \"August\";\n          break;\n\n        case 8:\n          renderMonth = \"September\";\n          break;\n\n        case 9:\n          renderMonth = \"October\";\n          break;\n\n        case 10:\n          renderMonth = \"November\";\n          break;\n\n        case 11:\n          renderMonth = \"December\";\n          break;\n\n        default:\n          renderMonth = null;\n      }\n\n      if (verboseType === \"renderWeekDay\") {\n        return renderWeekDay;\n      }\n\n      if (verboseType === \"renderMonth\") {\n        return renderMonth;\n      }\n    };\n\n    this.backdropDisplayHandler = day => {\n      this.setState((_ref11) => {\n        let backdropIsActive = _ref11.backdropIsActive,\n            dialogBoxData = _ref11.dialogBoxData,\n            restTop = _objectWithoutProperties(_ref11, [\"backdropIsActive\", \"dialogBoxData\"]);\n\n        return _objectSpread({\n          backdropIsActive: day,\n          dialogBoxData: {\n            displayDialogBox: false\n          }\n        }, restTop);\n      });\n    };\n\n    this.displayDialogBoxHandler = (day, topPositionFromClassCard, heigthPositionFromClassCard) => {\n      let displayDialogBox;\n      let backdropIsActiv;\n\n      if (this.state.dialogBoxData.displayDialogBox !== day && this.state.backdropIsActive !== \"cover all\") {\n        displayDialogBox = day;\n        backdropIsActiv = \"cover all\";\n      }\n\n      if (this.state.dialogBoxData.displayDialogBox === day && this.state.backdropIsActive === \"cover all\") {\n        displayDialogBox = false;\n        backdropIsActiv = \"false\";\n      }\n\n      this.setState((_ref12) => {\n        let dialogBoxData = _ref12.dialogBoxData,\n            backdropIsActive = _ref12.backdropIsActive,\n            restTop = _objectWithoutProperties(_ref12, [\"dialogBoxData\", \"backdropIsActive\"]);\n\n        return _objectSpread({\n          dialogBoxData: {\n            displayDialogBox: displayDialogBox,\n            topPositionFromClassCard: topPositionFromClassCard,\n            heigthPositionFromClassCard: heigthPositionFromClassCard\n          },\n          backdropIsActive: backdropIsActiv\n        }, restTop);\n      });\n    };\n\n    this.callbackContainerDimensions = container => {\n      this.setState((_ref13) => {\n        let layoutWidthDimensions = _ref13.layoutWidthDimensions,\n            restTop = _objectWithoutProperties(_ref13, [\"layoutWidthDimensions\"]);\n\n        return _objectSpread({\n          layoutWidthDimensions: {\n            width: container.offsetWidth\n          }\n        }, restTop);\n      });\n    };\n\n    this.callbackDayCardContainerDimensions = container => {\n      this.setState((_ref14) => {\n        let layoutWidthDimensions = _ref14.layoutWidthDimensions,\n            restTop = _objectWithoutProperties(_ref14, [\"layoutWidthDimensions\"]);\n\n        return _objectSpread({\n          layoutWidthDimensions: {\n            dayCardContainerWidth: container.offsetWidth\n          }\n        }, restTop);\n      });\n    };\n\n    this.viewModeHandler = appViewMode => {\n      this.setState({\n        appViewMode\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.calendarLogicHandler();\n    this.arrayOfTableRows(this.props.agendaInitialAvailableHour, this.props.agendaLastAvailableHour);\n    const appViewMode = this.props.defaultMode;\n    this.setState({\n      appViewMode\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if (prevState.currentMonth !== this.state.currentMonth) {\n      const currWeekIndex = this.state.currentMonth.findIndex(week => week.includes(new Date().setHours(0, 0, 0, 0)));\n\n      if (currWeekIndex !== -1 && prevState.currWeekIndex === 'initial') {\n        this.setState({\n          currWeekIndex\n        }, () => this.weekAgendaLogicHandler());\n      }\n    }\n\n    if (prevState.currentWeek !== this.state.currentWeek) {\n      const currentDayIndex = this.state.currentWeek.findIndex(day => day === new Date().setHours(0, 0, 0, 0));\n\n      if (currentDayIndex !== -1 && prevState.currentDayIndex === 'initial') {\n        this.setState({\n          currentDayIndex\n        }, () => this.dayModeLogicHandler());\n      }\n    }\n  } //the function below spreads the table of existing hours for <EmptyTables/>\n\n\n  render() {\n    let viewMode = \"\";\n    const weekMode = /*#__PURE__*/React.createElement(WeekMode, {\n      arrayOfDailyHoursTable: this.state.arrayOfDailyHoursTable,\n      backdropIsActive: this.state.backdropIsActive,\n      newDatesToVerboseHandler: this.newDatesToVerboseHandler,\n      displayDialogBoxHandler: this.displayDialogBoxHandler,\n      backdropDisplayHandler: data => this.backdropDisplayHandler(data),\n      dialogBoxData: this.state.dialogBoxData,\n      agendaInitialAvailableHour: this.props.agendaInitialAvailableHour,\n      layoutWidthDimensions: this.state.layoutWidthDimensions,\n      agendaLastAvailableHour: this.props.agendaLastAvailableHour,\n      dataToBeRendered: this.props.dataToBeRendered,\n      currentWeek: this.state.currentWeek,\n      monthGetter: this.state.monthGetter,\n      callbackDayCardContainerDimensions: this.callbackDayCardContainerDimensions,\n      dayCardContainerWidth: this.state.layoutWidthDimensions.dayCardContainerWidth,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }\n    });\n    const calendarMode = /*#__PURE__*/React.createElement(CalendarMode, {\n      monthGetter: this.state.monthGetter,\n      currentMonth: this.state.currentMonth,\n      currentWeek: this.state.currentWeek,\n      newDatesToVerboseHandler: this.newDatesToVerboseHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }\n    });\n    const dayMode = /*#__PURE__*/React.createElement(DayMode, {\n      arrayOfDailyHoursTable: this.state.arrayOfDailyHoursTable,\n      newDatesToVerboseHandler: this.newDatesToVerboseHandler,\n      agendaInitialAvailableHour: this.props.agendaInitialAvailableHour,\n      agendaLastAvailableHour: this.props.agendaLastAvailableHour,\n      dataToBeRendered: this.props.dataToBeRendered,\n      currentDay: this.state.currentDay,\n      monthGetter: this.state.monthGetter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 9\n      }\n    });\n\n    switch (this.state.appViewMode) {\n      case 'WeekMode':\n        viewMode = weekMode;\n        break;\n\n      case 'CalendarMode':\n        viewMode = calendarMode;\n        break;\n\n      case \"DayMode\":\n        viewMode = dayMode;\n        break;\n    }\n\n    return /*#__PURE__*/React.createElement(Layout, {\n      defaultMode: this.props.defaultMode,\n      appViewMode: this.state.appViewMode,\n      weekMode: () => this.viewModeHandler(\"WeekMode\"),\n      monthMode: () => this.viewModeHandler(\"CalendarMode\"),\n      dayMode: () => this.viewModeHandler(\"DayMode\"),\n      callbackContainerDimensions: this.callbackContainerDimensions,\n      appNavigationHandler: this.appNavigationHandler,\n      newDatesToVerboseHandler: this.newDatesToVerboseHandler,\n      currentWeek: this.state.currentWeek,\n      currentMonth: this.state.monthGetter,\n      currentYear: this.state.yearGetter,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 9\n      }\n    }, viewMode);\n  }\n\n}","map":{"version":3,"sources":["/Users/Dev/WebstormProjects/event-calendar/yoga-class-agenda-component/src/Agenda/Agenda.js"],"names":["React","Layout","WeekMode","CalendarMode","DayMode","Agenda","Component","state","appViewMode","props","defaultView","currentMonth","currentWeek","currWeekIndex","currentDay","currentDayIndex","prevMonthLastWeekIndex","monthGetter","Date","getMonth","yearGetter","getFullYear","arrayOfDailyHoursTable","backdropIsActive","dialogBoxData","displayDialogBox","topPositionFromClassCard","heigthPositionFromClassCard","layoutWidthDimensions","width","dayCardContainerWidth","arrayOfTableRows","startingHour","endingHour","i","push","Math","max","apply","setState","dayModeLogicHandler","filter","day","dayAgendaNavigationHandler","modal","length","weekAgendaLogicHandler","weekAgendaNavigationHandler","restTop","calendarNavigationHandler","includes","setHours","calendarLogicHandler","oneDay","lastDayOfTheMonth","getDate","valueOf","min","getDay","unshift","monthInWeeks","chunk","slice","flat","appNavigationHandler","newDatesToVerboseHandler","date","verboseType","renderWeekDay","toString","renderMonth","backdropDisplayHandler","displayDialogBoxHandler","backdropIsActiv","callbackContainerDimensions","container","offsetWidth","callbackDayCardContainerDimensions","viewModeHandler","componentDidMount","agendaInitialAvailableHour","agendaLastAvailableHour","defaultMode","componentDidUpdate","prevProps","prevState","snapshot","findIndex","week","render","viewMode","weekMode","data","dataToBeRendered","calendarMode","dayMode"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Layout from \"./UI/Layout/Layout\";\nimport WeekMode from \"./UI/ViewMode/WeekMode/WeekMode\";\nimport CalendarMode from \"./UI/ViewMode/CalendarMode/CalendarMode\";\nimport DayMode from \"./UI/ViewMode/DayMode/DayMode\";\n\nexport default class Agenda extends React.Component {\n  state = {\n    appViewMode: this.props.defaultView,\n    currentMonth: [],\n    currentWeek: [],\n    currWeekIndex: \"initial\",\n    currentDay: '',\n    currentDayIndex: \"initial\",\n    prevMonthLastWeekIndex: [],\n    monthGetter: new Date().getMonth(),\n    yearGetter: new Date().getFullYear(),\n    arrayOfDailyHoursTable: [],\n    backdropIsActive: false,\n    dialogBoxData: {\n      displayDialogBox: false,\n      topPositionFromClassCard: \"\",\n      heigthPositionFromClassCard: \"\"\n    },\n    layoutWidthDimensions: {\n      width: \"\",\n      dayCardContainerWidth: \"\"\n    }\n  };\n\n  componentDidMount(){\n    this.calendarLogicHandler();\n    this.arrayOfTableRows(this.props.agendaInitialAvailableHour, this.props.agendaLastAvailableHour);\n    const appViewMode = this.props.defaultMode;\n    this.setState({appViewMode});\n  };\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    if(prevState.currentMonth !== this.state.currentMonth) {\n      const currWeekIndex =  this.state.currentMonth.findIndex(week => week.includes(new Date().setHours(0,0,0,0)));\n      if(currWeekIndex !== -1 && prevState.currWeekIndex === 'initial') {\n        this.setState({currWeekIndex}, () => this.weekAgendaLogicHandler())\n      }\n    }\n    if(prevState.currentWeek !== this.state.currentWeek) {\n      const currentDayIndex = this.state.currentWeek.findIndex(day => day === new Date().setHours(0,0,0,0));\n      if(currentDayIndex !== -1 && prevState.currentDayIndex === 'initial') {\n        this.setState({currentDayIndex}, () => this.dayModeLogicHandler())\n      }\n    }\n  }\n\n  //the function below spreads the table of existing hours for <EmptyTables/>\n  arrayOfTableRows = (startingHour, endingHour) => {\n    let arrayOfDailyHoursTable = [startingHour];\n    for (let i = startingHour; i < endingHour; i++) {\n      arrayOfDailyHoursTable.push(\n          Math.max.apply(null, arrayOfDailyHoursTable) + 1\n      );\n    }\n    this.setState({ arrayOfDailyHoursTable });\n  };\n\n  dayModeLogicHandler = () => {\n    const currentWeek = this.state.currentWeek.filter(day => new Date(day).getMonth() === this.state.monthGetter);\n    const currentDay = this.state.currentWeek[this.state.currentDayIndex];\n    this.setState({currentDay});\n  };\n\n  dayAgendaNavigationHandler = modal => {\n    if(modal === 'increment') {\n      if(this.state.currentDayIndex < this.state.currentWeek.filter(day => new Date(day).getMonth() === this.state.monthGetter).length -1) {\n\n      }\n    }\n    if(modal === 'decrement') {\n\n    }\n  };\n\n  weekAgendaLogicHandler = () => {\n    const currentWeek = this.state.currentMonth[this.state.currWeekIndex];\n    this.setState({currentWeek});\n  };\n\n  weekAgendaNavigationHandler = modal => {\n    //init the current week index\n    if (modal === \"increment\") {\n      //if the number of weeks incremented does not exceed the amount of weeks in the month\n      if(this.state.currWeekIndex < this.state.currentMonth.length -1) {\n        this.setState(\n            ({currWeekIndex, ...restTop}) => ({\n              currWeekIndex: currWeekIndex + 1,\n              ...restTop\n            }),\n            () => {\n              this.weekAgendaLogicHandler()\n            }\n        );\n      }\n      if(this.state.currWeekIndex === this.state.currentMonth.length -1) {\n        this.setState(({currWeekIndex, ...restTop}) => ({\n          currWeekIndex: 0,\n          ...restTop\n        }), () => {\n          this.calendarNavigationHandler(\"increment\");\n        });\n      }\n    }\n    if (modal === \"decrement\" && !this.state.currentWeek.includes(new Date().setHours(0,0,0,0))) {\n      if(this.state.currWeekIndex > 0) {\n        this.setState(\n            ({currWeekIndex, ...restTop}) => ({\n              currWeekIndex: currWeekIndex - 1,\n              ...restTop\n            }),\n            () => {\n              this.weekAgendaLogicHandler();\n            })}\n      if(this.state.currWeekIndex === 0) {\n        this.calendarNavigationHandler(\"decrement\");\n      }\n    }\n  };\n\n  calendarLogicHandler = () => {\n    const oneDay = 86400000;\n    const lastDayOfTheMonth = new Date(this.state.yearGetter, this.state.monthGetter + 1, 0).getDate();\n    let currentMonth = [new Date(this.state.yearGetter, this.state.monthGetter, 1).valueOf()]; //starts on month day 1\n    for(let i = 1; i < lastDayOfTheMonth; i++) { //push the entire month\n      currentMonth.push(Math.max.apply(null, currentMonth) + oneDay)\n    }\n    //localize the first date of the month dates array and check what day of the week it is\n    //spread the days of the week, which are the remaining days of prev month to fill calendar first week\n    for(let i = new Date(Math.min(...currentMonth)).getDay(); i > 0; i-- ) {\n      currentMonth.unshift(Math.min.apply(null, currentMonth) - oneDay)\n    }\n    //spread the days of the week, which are the remaining days of prev month to fill calendar last week\n    for(let i = new Date(Math.max(...currentMonth)).getDay(); i < 6; i++ ) {\n      currentMonth.push(Math.max.apply(null, currentMonth) + oneDay)\n    }\n    let monthInWeeks = [];\n    for (let i = 0; i < currentMonth.length; i += 7 ) {\n      let chunk = currentMonth.slice(i, i+7 );\n      monthInWeeks.push(chunk)\n    }\n    currentMonth = monthInWeeks;\n    this.setState({currentMonth});\n  };\n\n  calendarNavigationHandler = modal => {\n    if(modal === \"increment\") {\n\n      //saving the max index of curr month before incrementing\n      this.setState(({prevMonthLastWeekIndex, ...restTop}) => ({\n        prevMonthLastWeekIndex: [...prevMonthLastWeekIndex, this.state.currentMonth.length -1],\n        ...restTop\n      }), () => this.setState({currWeekIndex: 0}));\n\n      if(this.state.monthGetter < 11) { //just add months, before changing the year\n        this.setState(({monthGetter, ...restTop}) => ({\n          monthGetter: monthGetter + 1,\n          ...restTop\n        }), () => this.calendarLogicHandler());\n      }\n\n      if(this.state.monthGetter >= 11) {//if the month is december it resets the month and increments the year\n        this.setState(({yearGetter, monthGetter, ...restTop}) => ({\n          yearGetter: yearGetter + 1,\n          monthGetter: 0,\n          ...restTop\n        }), () => this.calendarLogicHandler())\n      }\n    }\n    if (modal === \"decrement\") {\n\n      if(this.state.appViewMode === \"WeekMode\") {\n        //saving the max index of curr month before incrementing\n        this.setState({currWeekIndex: this.state.prevMonthLastWeekIndex[this.state.prevMonthLastWeekIndex.length -1]}, () => {\n          this.setState(({prevMonthLastWeekIndex, ...restTop}) => ({\n            prevMonthLastWeekIndex: [...prevMonthLastWeekIndex.slice(0, -1)],\n            ...restTop\n          }));\n        });\n      }\n\n      if(this.state.appViewMode === \"CalendarMode\") {\n        //saving the max index of curr month before incrementing\n        this.setState({currWeekIndex: 0}, () => {\n          this.setState(({prevMonthLastWeekIndex, ...restTop}) => ({\n            prevMonthLastWeekIndex: [...prevMonthLastWeekIndex.slice(0, -1)],\n            ...restTop\n          }));\n        });\n      }\n      //just subtract months, before changing the year, if the current day is not present in the current calendar month.\n      if(this.state.monthGetter > 0 && !this.state.currentMonth.flat().includes(new Date().setHours(0,0,0,0).valueOf())) {\n        this.setState(({monthGetter, ...restTop}) => ({\n          monthGetter: monthGetter - 1,\n          ...restTop\n        }), () => this.calendarLogicHandler());\n      }\n      //if the month is december it resets the month and increments the year\n      if(this.state.monthGetter <= 0) {\n        this.setState(({yearGetter, monthGetter, ...restTop}) => ({\n          yearGetter: yearGetter - 1,\n          monthGetter: 11,\n          ...restTop\n        }), () => this.calendarLogicHandler())\n      }\n    }\n  };\n\n  //this functions navigates in between weeks\n  appNavigationHandler = modal => {\n    if(this.state.appViewMode === \"WeekMode\") {\n      this.weekAgendaNavigationHandler(modal)\n    }\n    if(this.state.appViewMode === \"CalendarMode\") {\n      this.calendarNavigationHandler(modal)\n    }\n  };\n\n  //this function does the verbose work for my days to appear nicely\n  newDatesToVerboseHandler = (date, verboseType) => {\n    let renderWeekDay = date.toString().length > 2 ?\n        date.getDay() : date;\n    switch (renderWeekDay) {\n      case 0:\n        renderWeekDay = \"Sunday\";\n        break;\n\n      case 1:\n        renderWeekDay = \"Monday\";\n        break;\n\n      case 2:\n        renderWeekDay = \"Tuesday\";\n        break;\n\n      case 3:\n        renderWeekDay = \"Wednesday\";\n        break;\n\n      case 4:\n        renderWeekDay = \"Thursday\";\n        break;\n\n      case 5:\n        renderWeekDay = \"Friday\";\n        break;\n\n      case 6:\n        renderWeekDay = \"Saturday\";\n        break;\n      default:\n        renderWeekDay = null;\n    }\n\n    let renderMonth =  date.toString().length > 2 ?\n        date.getMonth() : date;\n\n    switch (renderMonth) {\n      case 0:\n        renderMonth = \"January\";\n        break;\n\n      case 1:\n        renderMonth = \"February\";\n        break;\n\n      case 2:\n        renderMonth = \"March\";\n        break;\n\n      case 3:\n        renderMonth = \"April\";\n        break;\n\n      case 4:\n        renderMonth = \"May\";\n        break;\n\n      case 5:\n        renderMonth = \"June\";\n        break;\n\n      case 6:\n        renderMonth = \"July\";\n        break;\n\n      case 7:\n        renderMonth = \"August\";\n        break;\n\n      case 8:\n        renderMonth = \"September\";\n        break;\n\n      case 9:\n        renderMonth = \"October\";\n        break;\n\n      case 10:\n        renderMonth = \"November\";\n        break;\n\n      case 11:\n        renderMonth = \"December\";\n        break;\n      default:\n        renderMonth = null;\n    }\n\n    if (verboseType === \"renderWeekDay\") {\n      return renderWeekDay;\n    }\n    if (verboseType === \"renderMonth\") {\n      return renderMonth;\n    }\n  };\n  //by clicking inside a event day card activates the backdrop for that day so I can edit the events or ad new ones\n  backdropDisplayHandler = (day) => {\n    this.setState(({ backdropIsActive, dialogBoxData, ...restTop }) => ({\n      backdropIsActive: day,\n      dialogBoxData: {\n        displayDialogBox: false\n      },\n      ...restTop\n    }));\n  };\n  //logic to run the dialog box. This box will handle create class, edit class & view full class card\n  displayDialogBoxHandler = (\n      day,\n      topPositionFromClassCard,\n      heigthPositionFromClassCard\n  ) => {\n    let displayDialogBox;\n    let backdropIsActiv;\n\n    if (this.state.dialogBoxData.displayDialogBox !== day && this.state.backdropIsActive !== \"cover all\") {\n      displayDialogBox = day;\n      backdropIsActiv = \"cover all\";\n    }\n    if (this.state.dialogBoxData.displayDialogBox === day && this.state.backdropIsActive === \"cover all\") {\n      displayDialogBox = false;\n      backdropIsActiv = \"false\";\n    }\n    this.setState(({ dialogBoxData, backdropIsActive, ...restTop }) => ({\n      dialogBoxData: {\n        displayDialogBox: displayDialogBox,\n        topPositionFromClassCard: topPositionFromClassCard,\n        heigthPositionFromClassCard: heigthPositionFromClassCard\n      },\n      backdropIsActive: backdropIsActiv,\n      ...restTop\n    }));\n  };\n\n  callbackContainerDimensions = container => {\n    this.setState(({ layoutWidthDimensions, ...restTop }) => ({\n      layoutWidthDimensions: {\n        width: container.offsetWidth,\n      },\n      ...restTop\n    }));\n  };\n\n  callbackDayCardContainerDimensions = container => {\n    this.setState(({ layoutWidthDimensions, ...restTop }) => ({\n      layoutWidthDimensions: {\n        dayCardContainerWidth: container.offsetWidth,\n      },\n      ...restTop\n    }));\n  };\n\n  viewModeHandler = (appViewMode) => {\n    this.setState({appViewMode})\n  };\n  render() {\n    let viewMode = \"\";\n    const weekMode = (\n        <WeekMode\n            arrayOfDailyHoursTable={this.state.arrayOfDailyHoursTable}\n            backdropIsActive={this.state.backdropIsActive}\n            newDatesToVerboseHandler={this.newDatesToVerboseHandler}\n            displayDialogBoxHandler={this.displayDialogBoxHandler}\n            backdropDisplayHandler={(data) => this.backdropDisplayHandler(data)}\n            dialogBoxData={this.state.dialogBoxData}\n            agendaInitialAvailableHour={this.props.agendaInitialAvailableHour}\n            layoutWidthDimensions={this.state.layoutWidthDimensions}\n            agendaLastAvailableHour={this.props.agendaLastAvailableHour}\n            dataToBeRendered={this.props.dataToBeRendered}\n            currentWeek={this.state.currentWeek}\n            monthGetter={this.state.monthGetter}\n            callbackDayCardContainerDimensions={this.callbackDayCardContainerDimensions}\n            dayCardContainerWidth={this.state.layoutWidthDimensions.dayCardContainerWidth}\n        />\n    );\n    const calendarMode = (\n        <CalendarMode\n            monthGetter={this.state.monthGetter}\n            currentMonth={this.state.currentMonth}\n            currentWeek={this.state.currentWeek}\n            newDatesToVerboseHandler={this.newDatesToVerboseHandler}/>\n    );\n    const dayMode = (\n        <DayMode\n            arrayOfDailyHoursTable={this.state.arrayOfDailyHoursTable}\n            newDatesToVerboseHandler={this.newDatesToVerboseHandler}\n            agendaInitialAvailableHour={this.props.agendaInitialAvailableHour}\n            agendaLastAvailableHour={this.props.agendaLastAvailableHour}\n            dataToBeRendered={this.props.dataToBeRendered}\n            currentDay={this.state.currentDay}\n            monthGetter={this.state.monthGetter}/>\n    );\n    switch (this.state.appViewMode) {\n      case('WeekMode') :\n        viewMode = weekMode;\n        break;\n      case('CalendarMode') :\n        viewMode = calendarMode;\n        break;\n      case(\"DayMode\") :\n        viewMode = dayMode;\n        break;\n    }\n    return (\n        <Layout\n            defaultMode={this.props.defaultMode}\n            appViewMode={this.state.appViewMode}\n            weekMode={() => this.viewModeHandler(\"WeekMode\")}\n            monthMode={() => this.viewModeHandler(\"CalendarMode\")}\n            dayMode={() => this.viewModeHandler(\"DayMode\")}\n            callbackContainerDimensions={this.callbackContainerDimensions}\n            appNavigationHandler={this.appNavigationHandler}\n            newDatesToVerboseHandler={this.newDatesToVerboseHandler}\n            currentWeek={this.state.currentWeek}\n            currentMonth={this.state.monthGetter}\n            currentYear={this.state.yearGetter}\n        >\n          {viewMode}\n        </Layout>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}